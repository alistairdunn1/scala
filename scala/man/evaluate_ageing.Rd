% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evaluate_ageing.R
\name{evaluate_ageing}
\alias{evaluate_ageing}
\title{Evaluate Ageing Needs for Age-Length Keys}
\usage{
evaluate_ageing(
  length_comp_results,
  age_length_key,
  target_fish_per_length = 10,
  min_fish_per_length = 3,
  priority_length_range = NULL,
  sex_specific = NULL,
  create_plot = TRUE
)
}
\arguments{
\item{length_comp_results}{A length_composition object from
\code{\link{calculate_length_compositions}}}

\item{age_length_key}{Either a single data frame or a named list of sex-specific
data frames containing age-length key data with columns: length, age, proportion.
Each row should represent one age-length-sex combination.}

\item{target_fish_per_length}{Numeric, target number of fish to age per length class.
If a single value, applied uniformly. If a function, applied to each length
(default: 10, or a function prioritising higher abundance length classes if NULL)}

\item{min_fish_per_length}{Numeric, minimum number of fish that should be aged
per length class (default: 3)}

\item{priority_length_range}{Numeric vector of length 2, specifying the length
range that should receive highest ageing priority (default: middle 60% of
length distribution)}

\item{sex_specific}{Logical, whether to analyse sex-specific ageing needs
(default: TRUE if sex-specific keys provided)}

\item{create_plot}{Logical, whether to create diagnostic plots (default: TRUE)}
}
\value{
A list containing:
  \describe{
    \item{ageing_summary}{Data frame summarising ageing needs by length and sex}
    \item{priority_lengths}{Vector of length classes needing immediate attention}
    \item{recommendations}{Character vector with specific ageing recommendations}
    \item{coverage_summary}{Summary statistics of current ageing coverage}
    \item{diagnostic_plot}{ggplot object showing ageing gaps (if create_plot = TRUE)}
  }
}
\description{
Analyses length composition data to identify where additional age-length key data
is needed for robust age composition analysis. Provides recommendations for
targeted ageing efforts based on the importance of different length classes
in the population and current ageing coverage.
}
\details{
This function evaluates the adequacy of age-length key coverage by:
\itemize{
  \item Analysing the length composition to identify important length classes
  \item Counting the number of age classes aged for each length (one row per age-length combination)
  \item Comparing current ageing effort with recommended targets
  \item Prioritising ageing needs based on length class importance and gaps
  \item Providing targeted recommendations for additional ageing
}

**Target Ageing Strategy:**
\itemize{
  \item \strong{High priority}: Middle-aged and older fish (main reproductive classes)
  \item \strong{Medium priority}: Younger fish in significant numbers
  \item \strong{Lower priority}: Very small/large fish with low abundance
}

The default target function prioritizes:
\itemize{
  \item 10 age classes for lengths in the priority range with high relative abundance (>50% of max)
  \item 8 age classes for lengths in the priority range (middle 60% of distribution)
  \item 7 age classes for lengths with high relative abundance (>50% of max composition)
  \item 5 age classes for lengths with moderate relative abundance (>20% of max composition)
  \item 3+ age classes minimum for all other length classes present
}

**Note:** Composition proportions are rescaled so the maximum proportion becomes 1.0,
making priority decisions independent of the number of length bins in the analysis.
}
\examples{
\dontrun{
# Calculate length compositions
lc_results <- calculate_length_compositions(
  fish_data = my_fish_data,
  strata_data = my_strata_data,
  length_range = c(20, 60),
  bootstraps = 100
)

# Load existing age-length key
my_alk <- read.csv("my_age_length_key.csv")

# Evaluate ageing needs
ageing_diagnosis <- evaluate_ageing(
  length_comp_results = lc_results,
  age_length_key = my_alk
)

# View recommendations
cat("Ageing Recommendations:\\\\n")
for (rec in ageing_diagnosis$recommendations) {
  cat("-", rec, "\\\\n")
}

# View diagnostic plot
print(ageing_diagnosis$diagnostic_plot)

# Get priority lengths for immediate attention
print(ageing_diagnosis$priority_lengths)

# Custom target function emphasising larger fish
custom_target <- function(length, max_length) {
  ifelse(length > 0.7 * max_length, 30,
    ifelse(length > 0.5 * max_length, 20, 10)
  )
}

ageing_diagnosis_custom <- evaluate_ageing(
  length_comp_results = lc_results,
  age_length_key = my_alk,
  target_fish_per_length = custom_target
)
}

}
\seealso{
\code{\link{create_alk}} for creating complete age-length keys,
  \code{\link{calculate_length_compositions}} for length composition analysis
}
