% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_lf_result.r
\name{calculate_lf_result}
\alias{calculate_lf_result}
\title{Core Function to Calculate Length Frequency Result with Sex Categories}
\usage{
calculate_lf_result(fish_data, strata_data, lengths, plus_group, minus_group)
}
\arguments{
\item{fish_data}{Data frame with columns: stratum, sample_id, length, male, female, unsexed, total, sample_weight_kg, total_catch_weight_kg}

\item{strata_data}{Data frame with columns: stratum, stratum_total_catch_kg}

\item{lengths}{Numeric vector of length bins to use for the frequency calculation}

\item{plus_group}{Logical, combine lengths >= max length into a plus group (default FALSE)}

\item{minus_group}{Logical, combine lengths <= min length into a minus group (default FALSE)}
}
\value{
3D array: length x sex x stratum, with upweighted frequencies for each sex and stratum
}
\description{
Calculates length frequency results by sex and stratum, applying upweighting factors at both sample and stratum levels.
}
\details{
The function applies a two-stage upweighting process:
  \enumerate{
    \item Sample-level upweighting based on total catch weight vs observed weight
    \item Stratum-level upweighting based on stratum totals vs sample totals
  }
Sex categories are: male, female, unsexed, and total. Plus and minus group functionality is available for aggregating extreme length bins.
}
\examples{
\dontrun{
fish_data <- data.frame(
  stratum = c("A", "A", "B", "B"),
  sample_id = c(1, 1, 2, 2),
  length = c(20, 25, 22, 28),
  male = c(2, 1, 3, 2),
  female = c(2, 1, 2, 1),
  unsexed = c(1, 1, 2, 1),
  total = c(5, 3, 7, 4),
  sample_weight_kg = c(10, 10, 15, 15),
  total_catch_weight_kg = c(100, 100, 150, 150)
)
strata_data <- data.frame(
  stratum = c("A", "B"),
  stratum_total_catch_kg = c(1000, 2000)
)
lengths <- 15:35
result <- calculate_lf_result(fish_data, strata_data, lengths, FALSE, FALSE)
}

}
