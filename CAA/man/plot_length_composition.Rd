% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_length_composition.r,
%   R/plot_length_frequency.r
\name{plot_length_composition}
\alias{plot_length_composition}
\title{Plot Scaled Length Composition Results}
\usage{
plot_length_composition(
  x,
  plot_type = "pooled",
  show_uncertainty = TRUE,
  sex_colors = NULL,
  title = NULL,
  y_axis = "composition"
)

plot_length_composition(
  x,
  plot_type = "pooled",
  show_uncertainty = TRUE,
  sex_colors = NULL,
  title = NULL,
  y_axis = "composition"
)
}
\arguments{
\item{x}{An object of class \code{scaled_length_composition} as returned by \code{calculate_scaled_length_compositions}}

\item{plot_type}{Character, either "by_stratum" for faceted plots by stratum, or "pooled" for combined results (default: "pooled")}

\item{show_uncertainty}{Logical, whether to show error bars based on CV estimates (default: TRUE)}

\item{sex_colors}{Named vector of colors for each sex category. Default uses colorblind-friendly palette}

\item{title}{Character, plot title (default: auto-generated based on plot type)}

\item{y_axis}{Character, either "composition" for absolute numbers or "proportion" for relative proportions (default: "composition")}
}
\value{
A ggplot object

A ggplot object
}
\description{
Creates ggplot visualizations of scaled length composition results by sex and stratum.
Can plot either by-stratum results (faceted) or pooled results across all strata.

Creates ggplot visualizations of scaled length composition results by sex and stratum.
Can plot either by-stratum results (faceted) or pooled results across all strata.
}
\details{
The function creates bar plots showing length composition distributions by sex category.

**Plot Types:**
- \code{by_stratum}: Creates faceted plots with one panel per stratum
- \code{pooled}: Shows combined results across all strata

**Y-axis Options:**
- \code{composition}: Shows absolute scaled compositions (number of fish)
- \code{proportion}: Shows relative proportions (0-1 scale)

Error bars represent ±1 standard error based on bootstrap CV estimates when \code{show_uncertainty = TRUE}.

The function creates bar plots showing length composition distributions by sex category.

**Plot Types:**
- \code{by_stratum}: Creates faceted plots with one panel per stratum
- \code{pooled}: Shows combined results across all strata

**Y-axis Options:**
- \code{composition}: Shows absolute scaled compositions (number of fish)
- \code{proportion}: Shows relative proportions (0-1 scale)

Error bars represent ±1 standard error based on bootstrap CV estimates when \code{show_uncertainty = TRUE}.
}
\examples{
\dontrun{
# Generate test data and calculate results
test_data <- generate_test_data("commercial")
lw_params <- get_default_lw_params()

results <- calculate_scaled_length_compositions(
  fish_data = test_data$fish_data,
  strata_data = test_data$strata_data,
  length_range = c(20, 35),
  lw_params_male = lw_params$male,
  lw_params_female = lw_params$female,
  lw_params_unsexed = lw_params$unsexed,
  bootstraps = 100
)

# Plot pooled results
plot_length_composition(results, plot_type = "pooled")

# Plot by stratum with proportions
plot_length_composition(results, plot_type = "by_stratum", y_axis = "proportion")

# Custom colors
custom_colors <- c("male" = "#1f77b4", "female" = "#ff7f0e",
                   "unsexed" = "#2ca02c", "total" = "#d62728")
plot_length_composition(results, sex_colors = custom_colors)
}

\dontrun{
# Generate test data and calculate results
test_data <- generate_test_data("commercial")
lw_params <- get_default_lw_params()

results <- calculate_scaled_length_compositions(
  fish_data = test_data$fish_data,
  strata_data = test_data$strata_data,
  length_range = c(20, 35),
  lw_params_male = lw_params$male,
  lw_params_female = lw_params$female,
  lw_params_unsexed = lw_params$unsexed,
  bootstraps = 100
)

# Plot pooled results
plot_length_composition(results, plot_type = "pooled")

# Plot by stratum with proportions
plot_length_composition(results, plot_type = "by_stratum", y_axis = "proportion")

# Custom colors
custom_colors <- c("male" = "#1f77b4", "female" = "#ff7f0e",
                   "unsexed" = "#2ca02c", "total" = "#d62728")
plot_length_composition(results, sex_colors = custom_colors)
}

}
